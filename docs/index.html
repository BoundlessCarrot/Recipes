<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>The Recipe Repository</title>
  <link rel="stylesheet" href="lite.css">
</head>

<body>
  <header>
    <h1>Jordan's Family Recipe Repository</h1>
    <nav style="text-align: center;">
      <a href="/Recipes">Home</a>
      |
      <a href="https://github.com/BoundlessCarrot/Recipes" target="_blank">Source files</a>
    </nav>
  </header>

  <main>
    <section>
      <ul>
        <script>
          // Function to get all markdown files recursively
          async function getMarkdownFiles() {
            try {
              const response = await fetch('/list-files');
              const files = await response.json();
              
              const fileList = document.createElement('div');
              
              files.forEach(file => {
                // Skip README.md
                if (file === 'README.md') return;
                
                // Convert markdown path to html path
                const htmlPath = file.replace('.md', '.html');
                // Get clean name without extension 
                const name = file.split('/').pop().replace('.md', '');
                
                const listItem = document.createElement('li');
                const link = document.createElement('a');
                link.href = htmlPath;
                link.textContent = name;
                listItem.appendChild(link);
                fileList.appendChild(listItem);
              });
              
              document.querySelector('ul').appendChild(fileList);
            } catch (err) {
              console.error('Error loading files:', err);
            }
          }

          // Call the function when page loads
          window.addEventListener('load', getMarkdownFiles);
        </script>
      </ul>
    </section>
  </main> 

  <footer>
    <details>
      <p style="text-align: center;">
        <i>
          You can also email me here:
          <a href="mailto:jordan.streete@gmail.com">jordan.streete@gmail.com</a>
        </i>
      </p>
    </details>
  </footer>
  </body>
</html>
